<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>쿠폰 관리</title>
    <link rel="stylesheet" href="/css/Manager-coupon/Manager.coupon.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/static/pretendard-dynamic-subset.css">
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
</head>
<body class="h-full">
<div class="Web">
    <div class="flex-h-screen">
        <!-- 네비 -->
        <nav class="header-nav">
            <div>
                <div class="nav-logo">
                    <a th:href="@{/}">
                        <img class="counseLaw-logo" src="/image/Manager-coupon/counseLaw.png" alt="카운슬로우 로고 이미지">
                    </a>
                    <div class="logo-l">|</div>
                    <div class="nav-PageName">
                        <span>Manager Page</span>
                    </div>
                </div>
            </div>
        </nav>
        <!-- 상단 네비 부분 끝 -->
        <!-- 메인 페이지 시작 -->
        <div class="Manager-FadeWrap">
            <nav class="left-FadeWrap">
                <div class="left-Profile">
                    <div class="left-ProfilePage">
                        <h2 class="Manager-name" th:text="|관리자: ${session.member.memberName}|"></h2>
                        <a target="_blank" href="/member/mypage-member">
                            <button class="Manager-PageLink">
                                <div class="MyPageLink">
                                    <div>내 페이지</div>
                                    <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" height="16px" width="16px" class="LinkSVG">
                                        <path d="M11 7a1     1 0 0 0-1-1H4v14h14v-6a1 1 0 1 0-2 0v4H6V8h4a1 1 0 0 0 1-1Z"></path>
                                        <path d="M19.01 3.829H20v6.656a1 1 0 1 1-2 0V7.244l-5.293 5.293a1 1 0 0 1-1.414-1.415l5.293-5.292h-3.243a1 1 0 1 1 0-2H19.01Z"></path>
                                    </svg>
                                </div>
                            </button>
                        </a>
                    </div>
                </div>
                <!--                관리자 페이지 목록-->
                <ul class="left-list">
                    <li class="left-categories">
                        <a href="/manager/manager-mainpage">
                            <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" class="categories-post">
                                <path d="M15.078 3.137H8.6a5.6 5.6 0 0 0-5.6 5.6v6.8a5.6 5.6 0 0 0 5.6 5.6h6.8a5.6 5.6 0 0 0 5.6-5.6V8.944l-1.6 1.6v4.993a4 4 0 0 1-4 4H8.6a4 4 0 0 1-4-4v-6.8a4 4 0 0 1 4-4h4.878l1.6-1.6Z"></path><path fill-rule="evenodd" clip-rule="evenodd" d="m20.692 7.116.534-.534a2.567 2.567 0 1 0-3.63-3.63L9.41 11.138l-1.103 3.74a.8.8 0 0 0 .994.993l3.74-1.103 6.52-6.52.005.004 1.13-1.132-.004-.004Zm-2.262 0-6.233 6.233-1.94.572.572-1.94 6.233-6.233 1.368 1.368Zm1.131-1.132-1.367-1.367.533-.534a.967.967 0 0 1 1.368 1.368l-.534.533Z"></path>
                            </svg>
                            <span class="categories-word">작성글 관리</span>
                        </a>
                    </li>
                    <li class="left-categories">
                        <a href="/manager/manager-announcement">
                            <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" class="categories-announcement">
                                <path d="M10.457 8.471a1.494 1.494 0 1 1 2.988 0 1.494 1.494 0 0 1-2.988 0ZM10.955 11.459c0-.275.223-.498.498-.498h.996c.275 0 .498.223.498.498v4.979a.498.498 0 0 1-.498.498h-.996a.498.498 0 0 1-.498-.498v-4.98Z"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M11.951 20.117a8.166 8.166 0 1 0 0-16.333 8.166 8.166 0 0 0 0 16.333Zm0 1.792c5.5 0 9.959-4.458 9.959-9.958S17.45 1.99 11.95 1.99s-9.959 4.46-9.959 9.96c0 5.5 4.459 9.958 9.959 9.958Z"></path>
                            </svg>
                            <span class="categories-word">공지사항</span>
                        </a>
                    </li>
                    <li class="left-categories">
                        <a href="/manager/manager-member">
                            <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" class="categories-managerment">
                                <path d="M8.5 11.7h2a6.057 6.057 0 0 1 1.769.265 6.51 6.51 0 0 0-.888 1.335H8.5a4.4 4.4 0 0 0-4.4 4.4v1c0 .22.18.4.4.4h6.881c.295.59.677 1.129 1.129 1.6H4.5a2 2 0 0 1-2-2v-1a6 6 0 0 1 6-6Z"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M10.5 10.2a3.502 3.502 0 0 1 0-7 3.5 3.5 0 1 1 0 7Zm1.9-3.5a1.9 1.9 0 1 1-3.8 0 1.9 1.9 0 0 1 3.8 0ZM13.945 13.147a.665.665 0 0 1 .306-.74l.833-.49a.665.665 0 0 1 .795.092l.46.437c.167.16.398.231.63.23a.892.892 0 0 0 .626-.24l.451-.445a.665.665 0 0 1 .794-.105l.84.476a.665.665 0 0 1 .32.735l-.15.616a.895.895 0 0 0 .116.66c.118.2.298.36.522.423l.61.168c.287.08.486.339.488.636l.008.965a.665.665 0 0 1-.477.644l-.608.179a.892.892 0 0 0-.513.43.898.898 0 0 0-.105.663l.159.614a.665.665 0 0 1-.307.74l-.832.49a.665.665 0 0 1-.795-.092l-.46-.437a.898.898 0 0 0-.63-.23.893.893 0 0 0-.626.24l-.452.445a.665.665 0 0 1-.794.105l-.84-.476a.665.665 0 0 1-.319-.735l.15-.617a.894.894 0 0 0-.117-.66.894.894 0 0 0-.52-.421l-.612-.17a.665.665 0 0 1-.488-.635l-.008-.965a.665.665 0 0 1 .477-.644l.608-.179a.892.892 0 0 0 .514-.43.898.898 0 0 0 .105-.663l-.159-.614Zm3.115 4.278a1.283 1.283 0 1 0 0-2.566 1.283 1.283 0 0 0 0 2.566Z"></path>
                            </svg>
                            <span class="categories-word">회원 관리</span>
                        </a>
                    </li>
                    <li class="left-categories">
                        <a href="/manager/manager-coupon">
                            <svg width="24" height="24" fill="none" xmlns="http://www.w3.org/2000/svg" class="categories-coupon">
                                <path fill-rule="evenodd" clip-rule="evenodd" d="M22 8.942c0 .513-.24.996-.649 1.304A2.188 2.188 0 0 0 20.477 12c0 .716.34 1.351.874 1.754.409.308.649.79.649 1.304v.968A3.967 3.967 0 0 1 18.04 20H5.96A3.967 3.967 0 0 1 2 16.026v-.968c0-.513.24-.996.649-1.304A2.188 2.188 0 0 0 3.523 12c0-.716-.34-1.351-.874-1.754A1.633 1.633 0 0 1 2 8.942v-.967A3.967 3.967 0 0 1 5.96 4h12.08C20.228 4 22 5.78 22 7.975v.967ZM5.96 5.631a2.34 2.34 0 0 0-2.336 2.344v.967A3.82 3.82 0 0 1 5.147 12a3.82 3.82 0 0 1-1.523 3.058v.968a2.34 2.34 0 0 0 2.335 2.343h12.082a2.34 2.34 0 0 0 2.335-2.343v-.968A3.82 3.82 0 0 1 18.853 12c0-1.25.598-2.36 1.523-3.058v-.967A2.34 2.34 0 0 0 18.04 5.63H5.959Z" fill="#333334"></path><path d="M16.112 14.066c0 .751-.606 1.36-1.354 1.36a1.356 1.356 0 0 1-1.353-1.36c0-.75.606-1.358 1.353-1.358.748 0 1.354.608 1.354 1.358ZM10.697 9.537c0 .75-.606 1.359-1.353 1.359A1.356 1.356 0 0 1 7.99 9.537c0-.75.606-1.359 1.354-1.359.747 0 1.353.609 1.353 1.36ZM13.957 8.728a.772.772 0 0 1 1.095 0 .78.78 0 0 1 0 1.1l-5.419 5.44a.773.773 0 0 1-1.095 0 .78.78 0 0 1 0-1.1l5.419-5.44Z" fill="#333334"></path>
                            </svg>
                            <span class="categories-word">쿠폰 관리</span>
                        </a>
                    </li>
                </ul>
            </nav>
            <!--            메인 시작-->
            <div class="coupon-Wrap">
                <div class="coupon-mainWrap">
                    <div class="coupon-page">
                        <header class="page-word">
                            <h1 class="coupon-font">쿠폰 관리</h1>
                        </header>
                        <div class="coupon-top">
                            <div>
                                <ul class="coupon-explain">
                                    <li class="explain-list">
                                        <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" class="explain-detail">
                                            <circle cx="12" cy="12" r="4"></circle>
                                        </svg>
                                        <p class="coupon-listWord">보상 쿠폰을 발급하실 경우 쿠폰 번호를 입력하셔야 하며, 의뢰인은 해당 번호를 입력하여 쿠폰을 발급받을 수 있습니다.</p>
                                    </li>
                                    <li class="second-list">
                                        <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" class="explain-detail">
                                            <circle cx="12" cy="12" r="4"></circle>
                                        </svg>
                                        <p class="coupon-listWord">발급한 쿠폰번호는 의뢰인 회원의 전화번호로 문자 메시지를 통해 전달해주세요.</p>
                                    </li>
                                </ul>
                            </div>
                        </div>
                        <div style="margin-top: 40px; display: flex;">
                            <span class="coupon-countWord">전체</span>
                            <span th:text="${couponCount}" class="coupon-count"></span>

                            <!--              쿠폰 추가 삭제 버튼-->
                            <button id="modalOpenButton" class="modal-open">쿠폰 추가</button>


                            <!--                                           쿠폰 입력 모달 창 -->
                            <div id="modalContainer" class="hidden">
                                <div id="modalContent">
                                    <div class="m_body">
                                        <div class="modal_label">쿠폰 이름 (필수)</div>
                                        <input type="text" onkeyup="validateBtn()" class="input_box couponTitle" id="name_box" placeholder="예) 첫상담 10% 할인 쿠폰"/>

                                        <div class="modal_label">만료 날짜(선택)</div>
                                        <input type="date" onchange="validateBtn()" class="input_box couponExpireDate"/>

                                        <div class="modal_label">사용가능 상담유형(ALL, CALL, VIDEO, VISIT 중 1개 필수)</div>
                                        <input type="text" onkeyup="validateBtn()" class="input_box couponAvailableType"/>

                                        <div class="modal_label">할인율(% 단위, 필수)</div>
                                        <input type="number" onkeyup="validateBtn()" class="input_box couponDiscountRate" />

                                        <div class="modal_label">쿠폰 이벤트 여부(이벤트일 경우 EVENT 입력, 선택)</div>
                                        <input type="text" onkeyup="validateBtn()" class="input_box couponEvent" />

                                        <div class="modal_label">쿠폰 번호(보상 쿠폰일 경우, 선택)</div>
                                        <input type="text" onkeyup="validateBtn()" class="input_box couponNumber" />
                                        
                                        <div class="modal_label">보상 쿠폰을 전달할 멤버의 id (선택)</div>
                                        <input type="text" onkeyup="validateBtn()" class="input_box memberId" />

                                        <button class="coupon-add" disabled onclick="addCoupon()">쿠폰 추가</button>
                                    </div>


                                    <button id="modalCloseButton" style="position: absolute;top: 10px;right: 10px;">
                                        <i class='bx bx-x bx-md' ></i>
                                    </button>

                                    <div>
                                        <ul class="coupon-explain">
                                            <li class="explain-list">
                                                <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" class="explain-detail">
                                                    <circle cx="12" cy="12" r="4"></circle>
                                                </svg>
                                                <p class="coupon-addListWord">보상 쿠폰을 발급하실 경우 쿠폰 번호를 입력하셔야 하며, 의뢰인은 해당 번호를 입력하여 쿠폰을 발급받을 수 있습니다.</p>
                                            </li>
                                            <li class="second-list">
                                                <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" class="explain-detail">
                                                    <circle cx="12" cy="12" r="4"></circle>
                                                </svg>
                                                <p class="coupon-addListWord">발급한 쿠폰번호는 의뢰인 회원의 전화번호로 문자 메시지를 통해 전달해주세요.</p>
                                            </li>
                                        </ul>
                                    </div>


                                </div>
                            </div>
                            <!--              모달 창 종료-->
                        </div>
                        <div class="coupon-info">
                            <div class="coupon-info-topName"><strong>쿠폰 이름</strong></div>
                            <div class="coupon-info-date"><strong>만료 날짜</strong></div>
                            <div class="coupon-info-stock"><strong>사용가능 상담유형</strong></div>
                            <div class="coupon-info-period"><strong>할인율</strong></div>
                            <div class="coupon-info-event"><strong>이벤트</strong></div>
                            <div class="coupon-id" ><strong>쿠폰 번호</strong></div>
                            <div class="coupon-id"><strong>보상 대상 멤버id</strong></div>
                        </div>
                        <!--            쿠폰 리스트-->
                        
                        <div th:each="coupon: ${coupons}" class="coupon-info">
                            <input type='hidden' name='Basket' th:value="${coupon.couponId}">
                            <div th:text="${coupon.couponTitle}" class="coupon-info-name"></div>
                            <div th:text="${coupon.couponExpireDate == null ? '무기한' : #temporals.format(coupon.couponExpireDate, 'yyyy-MM-dd')}" class="coupon-info-date"></div>
                            <div th:text="${coupon.couponAvailableType}" class="coupon-info-stock"></div>
                            <div th:text="${coupon.couponDiscountRate} + '%'" class="coupon-info-period"></div>
                            <div th:text="${coupon.couponEvent == null ? '해당 없음' : coupon.couponEvent}" class="coupon-info-event"></div>
                            <div th:text="${coupon.couponNumber == null ? '해당 없음' : coupon.couponNumber}" class="coupon-id" ></div>
                            <div th:text="${coupon.memberId == null ? '해당 없음' : coupon.memberId}" class="coupon-id"></div>
                            <button th:onclick="|deleteCoupon(${coupon.couponId})|"
                                    class="detailContent-DeleteButton">
                                <input type="hidden" th:value="${coupon.couponId}" th:name="couponId">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"
                                     fill="currentColor" class="bi bi-trash3" viewBox="0 0 16 16">
                                    <path d="M6.5 1h3a.5.5 0 0 1 .5.5v1H6v-1a.5.5 0 0 1 .5-.5ZM11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3A1.5 1.5 0 0 0 5 1.5v1H2.506a.58.58 0 0 0-.01 0H1.5a.5.5 0 0 0 0 1h.538l.853 10.66A2 2 0 0 0 4.885 16h6.23a2 2 0 0 0 1.994-1.84l.853-10.66h.538a.5.5 0 0 0 0-1h-.995a.59.59 0 0 0-.01 0H11Zm1.958 1-.846 10.58a1 1 0 0 1-.997.92h-6.23a1 1 0 0 1-.997-.92L3.042 3.5h9.916Zm-7.487 1a.5.5 0 0 1 .528.47l.5 8.5a.5.5 0 0 1-.998.06L5 5.03a.5.5 0 0 1 .47-.53Zm5.058 0a.5.5 0 0 1 .47.53l-.5 8.5a.5.5 0 1 1-.998-.06l.5-8.5a.5.5 0 0 1 .528-.47ZM8 4.5a.5.5 0 0 1 .5.5v8.5a.5.5 0 0 1-1 0V5a.5.5 0 0 1 .5-.5Z"/>
                                </svg>
                            </button>
                        </div>
                        <section class="review-pagination">
                            <lt-pagination th:with="start=${pagination.startPage}, last=${pagination.endPage}">
                                <div class="lt-pagination pagination-component">
                                    <div class="lt-pagination__pages">
                                        <div class="lt-pagination__pages-button-wrap">
                                            <a th:each="eachpage : ${#numbers.sequence(start, last)}" th:href="'/manager/manager-coupon?page=' + ${eachpage}"
                                               th:classappend="${eachpage == pagination.page ? 'on' : 'off'}"
                                               class="lt-pagination__pages-button" th:text="${eachpage}">
                                            </a>
                                        </div>
                                        <div class="pagination-next-five" th:if="${pagination.endPage >= 6}">
                                            <a th:href="'/manager/manager-coupon?page=' + ${start+5}">
                                                다음 5페이지
                                            </a>
                                        </div>
                                        <div class="pagination-arrow-button" th:if="${pagination.endPage >= 6}">
                                            <img width=20 height=20 src="/image/clientReviews/next.png" class="PaginationButtonGroup_Icon">
                                        </div>
                                    </div>
                                </div>
                            </lt-pagination>
                        </section>
                        <ul th:if="${#lists.isEmpty(coupons)}">
                            <div class="coupon-list">
                                <svg width="54" height="56" fill="none" xmlns="http://www.w3.org/2000/svg" class="noCoupon-img">
                                    <path fill-rule="evenodd" clip-rule="evenodd" d="M4.702 17.497a3 3 0 0 1 3.424-2.506l41.26 6.383a3 3 0 0 1 2.506 3.424l-1.053 6.806a3.859 3.859 0 0 0-1.18 7.627l-1.053 6.807a3 3 0 0 1-3.423 2.506l-41.26-6.383a3 3 0 0 1-2.507-3.424l1.053-6.806a3.859 3.859 0 0 0 1.18-7.627l1.053-6.807Z" fill="#A08DFF"></path>
                                    <path fill-rule="evenodd" clip-rule="evenodd" d="M14.803 18.464c.263.04.443.287.403.55l-.138.894a.482.482 0 0 1-.954-.147l.138-.894a.482.482 0 0 1 .55-.403Zm-.415 2.681c.263.04.444.287.403.55l-.277 1.788a.482.482 0 1 1-.953-.147l.277-1.788a.482.482 0 0 1 .55-.403Zm-.553 3.575c.263.04.444.287.403.55l-.277 1.788a.482.482 0 1 1-.953-.147l.277-1.788a.482.482 0 0 1 .55-.403Zm-.553 3.575c.263.04.444.287.403.55l-.277 1.788a.482.482 0 0 1-.953-.147l.277-1.788a.482.482 0 0 1 .55-.403Zm-.553 3.575c.263.04.444.287.403.55l-.277 1.788a.482.482 0 0 1-.953-.147l.276-1.788a.482.482 0 0 1 .55-.403Zm-.553 3.575c.263.04.443.287.403.55l-.277 1.788a.482.482 0 0 1-.953-.147l.276-1.788a.482.482 0 0 1 .55-.403Zm-.553 3.575c.263.04.443.287.403.55l-.139.894a.482.482 0 1 1-.953-.147l.138-.894a.482.482 0 0 1 .55-.403Z" fill="#000"></path>
                                    <path fill-rule="evenodd" clip-rule="evenodd" d="M24.848 29.871c1.082.168 2.18-.575 2.365-1.774.185-1.199-.637-2.238-1.719-2.405-1.082-.168-2.18.575-2.365 1.773-.186 1.2.636 2.239 1.718 2.406Zm-.26 1.672a3.806 3.806 0 1 0 1.165-7.523 3.806 3.806 0 0 0-1.164 7.523ZM33.836 39.666c1.082.167 2.18-.575 2.365-1.774.185-1.2-.636-2.238-1.719-2.406-1.082-.167-2.18.575-2.365 1.774-.185 1.199.636 2.238 1.719 2.406Zm-.259 1.671a3.806 3.806 0 1 0 1.164-7.523 3.806 3.806 0 0 0-1.164 7.523ZM36.885 27.694c.285.39.2.937-.19 1.223L23.603 38.5a.875.875 0 1 1-1.033-1.41l13.094-9.586a.875.875 0 0 1 1.222.19Z" fill="#fff"></path>
                                    <path d="M4.756 4.544c2.083.05 3.502 1.417 5.227 3.003.303-.864.92-3.58 1.915-3.642 1.616-.102 2.337 2.443 1.813 3.482-.668 1.321-1.147 2.778-1.79 4.117-.131.274-.87 2.127-1.094 1.9-.3-.302-.878-.68-1.248-.936-.932-.643-1.82-1.456-2.67-2.225C5.51 8.977 3.06 7.025 3.485 5.049c.105-.486.874-.514 1.271-.505Z" fill="#92EAFF"></path>
                                    <ellipse cx="26.188" cy="53.541" rx="19.126" ry="2.459" fill="#E4E4E4"></ellipse>
                                    <path d="M52.481 47.424c-1.736-.793-3.453-.232-5.509.385.096-.833.673-3.319-.122-3.768-1.291-.73-2.904 1.079-2.887 2.146.022 1.355-.165 2.748-.171 4.109-.002.278-.134 2.1.141 2.004.369-.13.997-.21 1.404-.273 1.025-.157 2.082-.472 3.091-.766 1.66-.484 4.46-1.114 4.9-2.913.108-.442-.515-.773-.847-.924Z" fill="#92EAFF"></path>
                                </svg>
                                <p class="noCoupon-word">발급된 쿠폰이 없습니다</p>
                            </div>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="/js/Manager-coupon/Manager-coupon.js"></script>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@9"></script>
</body>
</html>
